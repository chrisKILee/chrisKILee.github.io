var module = "";
var istestall= false;

function gotest(kkk){
	Q.state.stats.tAll = 0;
	Q.state.stats.tRan = 0;
	Q.state.stats.tBad = 0;
	Q.state.currentIndex = -1;

	if (kkk == 'alltest')
	{
		kkk = 'hvac';
		module=kkk;
		parseURLParameter(kkk);
		istestall = true;
	}else{
		module=kkk;
		parseURLParameter(kkk);
	}
}
function parseURLParameter(kkk) {
	//Q.abortTestRun(true);
	var urlString = document.URL.toString();
	var testArr = [];

	xmlhttp = new XMLHttpRequest();

	xmlhttp.open("GET", kkk+"/test-suite-hkmc.xml", true);

	xmlhttp.onreadystatechange = function() {
		if (xmlhttp.readyState == 4) {
			if (xmlhttp.status == 200) {
				try {
					var xmlDoc = xmlhttp.responseXML;
					var test = xmlDoc.getElementsByTagName("test");
					for (i = 0; i < test.length; i++) {
						testArr[i] = kkk+"/" + test[i].getAttribute('src');
					}
					//alert(testArr.length);
					tests = testArr;
					Q.runTests(tests);
				} catch(e) {
					xmlDoc = null;
					alert(e.message);
				}
			} else {
				//alert("status : "+xmlhttp.status);
				if(xmlhttp.status == 0){
					alert("Test Suite is not prepared" );
				}else{
					alert("status : "+xmlhttp.status);
				}
			}
		}
	}
	xmlhttp.send();
}

var tests;

